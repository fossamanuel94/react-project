(this.webpackJsonppelados_front=this.webpackJsonppelados_front||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(50),r=a.n(c),o=(a(59),a(2)),i=(a(15),a(8)),u=a.n(i),l=a(3),j=a(13),p=a(4),m=a.n(p),b=a(5),d=a(0);function O(){var e=Object(s.useContext)(L).setUserState,t=Object(b.f)(),a=Object(s.useState)({user_email:"",user_pw:""}),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)("input-form"),p=Object(o.a)(i,2),O=p[0],f=p[1],h=Object(s.useState)("input-form"),g=Object(o.a)(h,2),x=g[0],v=g[1],_=Object(s.useState)("Email"),N=Object(o.a)(_,2),k=N[0],S=N[1],C=Object(s.useState)("Password"),w=Object(o.a)(C,2),y=w[0],I=w[1],F=Object(s.useState)(!0),T=Object(o.a)(F,2),E=T[0],D=T[1],J=function(e){return m.a.post("https://manuelfossa-nodejs.herokuapp.com/users/login",{user_email:e.user_email,user_pw:e.user_pw})},R=function(){var a=Object(j.a)(u.a.mark((function a(s){var n,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),""===c.user_email&&(f("input-form invalid"),S("Complete el campo")),""!==c.user_pw){a.next=7;break}v("input-form invalid"),I("Complete el campo"),a.next=12;break;case 7:return n={user_email:c.user_email,user_pw:c.user_pw},a.next=10,J(n);case 10:200!==(o=a.sent).status?(D(!1),"Email inexistente"===o.data.message?r({user_email:"",user_pw:""}):r(Object(l.a)(Object(l.a)({},c),{},{user_pw:""}))):(sessionStorage.setItem("Tokens",JSON.stringify(o.data.tokens)),sessionStorage.setItem("Name",JSON.stringify(o.data.name)),sessionStorage.setItem("Type",JSON.stringify(o.data.type)),r({user_email:"",user_pw:""}),e(!0),sessionStorage.getItem("Tokens"),t.push("/"));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(d.jsxs)("form",{className:"container-login",onSubmit:R,children:[Object(d.jsx)("p",{className:"title-form",children:"Login"}),E?null:Object(d.jsx)("div",{className:"alert-error",children:"Email o Contrasena incorrecto"}),Object(d.jsx)("input",{type:"email",className:O,placeholder:k,value:c.user_email,onChange:function(e){return r(Object(l.a)(Object(l.a)({},c),{},{user_email:e.target.value}))},onFocus:function(){return f("input-form",D(!0))}}),Object(d.jsx)("input",{type:"password",className:x,placeholder:y,value:c.user_pw,onChange:function(e){return r(Object(l.a)(Object(l.a)({},c),{},{user_pw:e.target.value}))},onFocus:function(){return v("input-form",D(!0))}}),Object(d.jsx)("button",{type:"submit",className:"btn-form",children:"Login"}),Object(d.jsx)("a",{href:"/sign-in",children:"No estas registrado? Click aca!"})]})}var f=a(7),h=[{id_categorie:1,categorie_name:"Hardware"},{id_categorie:2,categorie_name:"Software"},{id_categorie:3,categorie_name:"Perifericos"},{id_categorie:4,categorie_name:"Juegos"},{id_categorie:5,categorie_name:"Movil"},{id_categorie:6,categorie_name:"Guias"},{id_categorie:7,categorie_name:"Consolas"},{id_categorie:8,categorie_name:"Reviews"}];function g(){var e=Object(b.f)(),t=Object(s.useContext)(L),a=t.userState,n=t.setUserState,c=Object(s.useState)(""),r=Object(o.a)(c,2),i=r[0],u=r[1],l=Object(s.useState)(!1),j=Object(o.a)(l,2),p=j[0],m=j[1],O=Object(s.useState)(!1),g=Object(o.a)(O,2),x=g[0],v=g[1];Object(s.useEffect)((function(){var e=sessionStorage.getItem("Name"),t=JSON.parse(sessionStorage.getItem("Type"));null===e&&null===t?n(!1):(n(!0),u(JSON.parse(e)),1===t&&m(!0))}),[a]);return Object(d.jsx)("div",{className:"m-navbar",children:Object(d.jsxs)("div",{className:"container-nav",children:[Object(d.jsxs)("div",{className:"container-title",children:[Object(d.jsx)("button",{className:"nav-button",onClick:function(){v(!x)}}),Object(d.jsx)(f.b,{className:"nav-title",to:"/",children:"PELADOS"})]}),Object(d.jsxs)("ul",{className:"nav-ul",id:x?"hidden":"",children:[h.map((function(e){var t=e.id_categorie,a=e.categorie_name;return Object(d.jsx)(f.b,{className:"nav-categorie",to:"/categorie-post/".concat(t),onClick:function(){v(!1)},children:Object(d.jsx)("li",{className:"nav-li",children:a})},t)})),a?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:"nav-user",onClick:function(t){t.preventDefault(),sessionStorage.removeItem("Name"),sessionStorage.removeItem("Type"),sessionStorage.removeItem("Tokens"),n(!1),m(!1),e.push("/")},children:"Logout"}),p?Object(d.jsx)(f.b,{to:"/new-post",children:Object(d.jsx)("li",{className:"nav-user",children:i})}):Object(d.jsx)("li",{className:"nav-user",children:i})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f.b,{className:"nav-categorie",to:"/login",onClick:function(){v(!1)},children:Object(d.jsx)("li",{className:"nav-user",children:"Login"})}),Object(d.jsx)(f.b,{className:"nav-categorie",to:"/sign-in",onClick:function(){v(!1)},children:Object(d.jsx)("li",{className:"nav-user",children:"Registrate"})})]})]})]})})}function x(){var e=Object(b.f)(),t=Object(s.useState)({user_name:"",user_email:"",user_password:"",user_nickname:"",user_image:"",user_passwordConf:""}),a=Object(o.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)("Nombre"),i=Object(o.a)(r,2),p=i[0],O=i[1],f=Object(s.useState)("Nickname"),h=Object(o.a)(f,2),g=h[0],x=h[1],v=Object(s.useState)("Email"),_=Object(o.a)(v,2),N=_[0],k=_[1],S=Object(s.useState)("Image (URL)"),C=Object(o.a)(S,2),w=C[0],y=C[1],I=Object(s.useState)("Contrase\xf1a"),F=Object(o.a)(I,2),T=F[0],E=F[1],D=Object(s.useState)("Repetir Contrase\xf1a"),J=Object(o.a)(D,2),L=J[0],R=J[1],P=Object(s.useState)("input-form"),A=Object(o.a)(P,2),B=A[0],U=A[1],z=Object(s.useState)("input-form"),M=Object(o.a)(z,2),G=M[0],H=M[1],K=Object(s.useState)("input-form"),Q=Object(o.a)(K,2),q=Q[0],V=Q[1],W=Object(s.useState)("input-form"),X=Object(o.a)(W,2),Y=X[0],Z=X[1],$=Object(s.useState)("input-form"),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],se=Object(s.useState)("input-form"),ne=Object(o.a)(se,2),ce=ne[0],re=ne[1],oe=function(){var t=Object(j.a)(u.a.mark((function t(a){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""===n.user_name&&(U("input-form invalid"),O("Complete el campo")),""===n.user_email&&(Z("input-form invalid"),k("Complete el campo")),""===n.user_password&&(H("input-form invalid"),E("Complete el campo")),""===n.user_nickname&&(ae("input-form invalid"),x("Complete el campo")),""===n.user_passwordConf&&(V("input-form invalid"),R("Complete el campo")),""!==n.user_image){t.next=11;break}re("input-form invalid"),y("Complete el campo"),t.next=16;break;case 11:return t.next=13,ie(n);case 13:s=t.sent,alert(s.data),e.push("/");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ie=function(e){var t=e.user_name,a=e.user_email,s=e.user_password,n=e.user_nickname,c=e.user_image;return m()({method:"post",url:"https://manuelfossa-nodejs.herokuapp.com/users/add-user",data:{user_name:t,user_email:a,user_password:s,user_nickname:n,user_image:c}})},ue=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=5;break}return e.next=3,m.a.get("https://manuelfossa-nodejs.herokuapp.com/users/email-validation/".concat(t));case 3:""===e.sent.data?Z("input-form valid"):Z("input-form invalid");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=5;break}return e.next=3,m.a.get("https://manuelfossa-nodejs.herokuapp.com/users/nick-validation/".concat(t));case 3:""===e.sent.data?ae("input-form valid"):ae("input-form invalid");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("form",{className:"container-register",onSubmit:oe,children:[Object(d.jsx)("p",{className:"title-form",children:"Registrate"}),Object(d.jsx)("input",{type:"text",className:B,placeholder:p,value:n.user_name,onChange:function(e){return c(Object(l.a)(Object(l.a)({},n),{},{user_name:e.target.value}))},onFocus:function(){return U("input-form")}}),Object(d.jsx)("input",{type:"text",className:te,placeholder:g,value:n.user_nickname,onChange:function(e){return c(Object(l.a)(Object(l.a)({},n),{},{user_nickname:e.target.value}))},onBlur:function(e){return le(e.target.value)},onFocus:function(){return ae("input-form")}}),Object(d.jsx)("input",{type:"email",className:Y,placeholder:N,value:n.user_email,onChange:function(e){return c(Object(l.a)(Object(l.a)({},n),{},{user_email:e.target.value}))},onBlur:function(e){return ue(e.target.value)},onFocus:function(){return Z("input-form")}}),Object(d.jsx)("input",{type:"text",className:ce,placeholder:w,value:n.user_image,onChange:function(e){return c(Object(l.a)(Object(l.a)({},n),{},{user_image:e.target.value}))},onFocus:function(){return re("input-form")}}),Object(d.jsx)("input",{type:"password",className:G,placeholder:T,value:n.user_password,onChange:function(e){return c(Object(l.a)(Object(l.a)({},n),{},{user_password:e.target.value}))},onFocus:function(){return H("input-form")}}),Object(d.jsx)("input",{type:"password",className:q,placeholder:L,value:n.user_passwordConf,onChange:function(e){var t;c(Object(l.a)(Object(l.a)({},n),{},{user_passwordConf:e.target.value}),((t=e.target.value)===n.user_password&&V("input-form valid"),t!==n.user_password&&""!==t&&V("input-form invalid"),void(""===t&&(V("input-form"),R("Repetir Contrase\xf1a")))))}}),Object(d.jsx)("button",{type:"submit",className:"btn-form",children:"Registrarse"})]})}function v(e){var t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(""),i=Object(o.a)(r,2),u=i[0],l=i[1];return Object(s.useEffect)((function(){m.a.get("https://manuelfossa-nodejs.herokuapp.com/categories/get-categories").then((function(e){c(e.data.data)}))}),[]),Object(s.useEffect)((function(){e.selectCateg(u)}),[u]),Object(d.jsx)("select",{className:"categorie-select",onChange:function(e){l(e.target.value)},children:n.map((function(e){return Object(d.jsx)("option",{value:e.id_categorie,children:e.categorie},e.id_categorie)}))})}var _=a(52),N=a(53),k=a.n(N);function S(){Object(b.f)();var e=Object(s.useState)({postDesc:"",postTitle:"",postSubtitle:"",postImage:"",postCateg:1}),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!0),r=Object(o.a)(c,2),i=r[0],p=r[1],O=function(e){var t=e.postSended,a=t.post_title,s=t.post_image,n=t.post_desc,c=t.post_categ,r=t.post_subtitle;return m.a.post("https://manuelfossa-nodejs.herokuapp.com/posts/add-post",{post_desc:n,post_title:a,post_subtitle:r,post_image:s,post_categ:c},{headers:{Authorization:"Bearer "+e.token}})},f=function(){var e=Object(j.a)(u.a.mark((function e(t){var s,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==a.postTitle&&""!==a.postSubtitle&&""!==a.postImage&&""!==a.postDesc){e.next=5;break}p(!1),e.next=24;break;case 5:if(s=sessionStorage.getItem("Tokens"),n=JSON.parse(s),c={postSended:{post_desc:a.postDesc,post_title:a.postTitle,post_subtitle:a.postSubtitle,post_image:a.postImage,post_categ:a.postCateg},token:n.tokenA},null!==sessionStorage.getItem("Tokens")){e.next=11;break}e.next=24;break;case 11:return e.next=13,O(c);case 13:if("jwt expired"!==e.sent.data.message){e.next=24;break}return e.next=17,o=n.tokenR,m.a.post("https://manuelfossa-nodejs.herokuapp.com/jwt/token",{token:o});case 17:return r=e.sent,c.token=r.data.tokenA,e.next=21,O(c);case 21:e.sent,e.next=24;break;case 24:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){void 0===a.postCateg&&n(Object(l.a)(Object(l.a)({},a),{},{postCateg:1})),console.log(a)}),[]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{className:"container-create-post",onSubmit:f,children:[i?null:Object(d.jsx)("div",{className:"alert-error",children:"Complete los campos"}),Object(d.jsx)("input",{type:"text",className:"input-form",placeholder:"Titulo",value:a.postTitle,onChange:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{postTitle:e.target.value}))},onFocus:function(){return p(!0)}}),Object(d.jsx)("input",{type:"text",className:"input-form",placeholder:"Subtitulo",value:a.postSubtitle,onChange:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{postSubtitle:e.target.value}))},onFocus:function(){return p(!0)}}),Object(d.jsx)("input",{type:"text",className:"input-form",placeholder:"Imagen",value:a.postImage,onChange:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{postImage:e.target.value}))},onFocus:function(){return p(!0)}}),Object(d.jsx)(v,{selectCateg:function(e){n(Object(l.a)(Object(l.a)({},a),{},{postCateg:e}))}}),Object(d.jsx)(_.CKEditor,{className:"txt-editor",editor:k.a,onChange:function(e,t){var s=t.getData();n(Object(l.a)(Object(l.a)({},a),{},{postDesc:s}))},config:{toolbar:["bold","italic","underline","link","undo","redo","numberedList","bulletedList","blockQuote"]},onFocus:function(){return p(!0)}}),Object(d.jsx)("button",{type:"submit",className:"btn-form",children:"Crear Post"})]})})}function C(e){var t=e.post,a=t.post_image,s=t.id_post,n=t.post_title,c=t.post_subtitle;return Object(d.jsxs)("div",{className:"col-card",children:[Object(d.jsx)(f.b,{className:"link",to:"/post/".concat(s),children:Object(d.jsx)("img",{className:"img-card",alt:"...",src:a})}),Object(d.jsx)(f.b,{className:"link",to:"/post/".concat(s),children:Object(d.jsx)("h3",{className:"title-card",children:n})}),Object(d.jsx)("p",{className:"subtitle-card",children:"".concat(c.substring(0,70),"...")})]})}function w(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(s.useEffect)((function(){m.a.get("https://manuelfossa-nodejs.herokuapp.com/posts/all-posts").then((function(e){n(e.data.result)}))}),[]),Object(d.jsx)("div",{className:"container-card",children:Object(d.jsx)("div",{className:"row-card",children:a.map((function(e){return Object(d.jsx)(C,{post:e},e.id_post)}))})})}var y=a(19),I=a.n(y);function F(e){var t=e.id,a=Object(s.useState)([]),n=Object(o.a)(a,2),c=n[0],r=n[1];return Object(s.useEffect)((function(){m()("https://manuelfossa-nodejs.herokuapp.com/comments/".concat(t)).then((function(e){r(e.data.result)}))}),[]),Object(d.jsx)(d.Fragment,{children:c.map((function(e){var t=e.id_comment,a=e.user_nickname,s=e.comment_date,n=e.comment,c=e.user_image;return Object(d.jsxs)("div",{className:"comment-container",children:[Object(d.jsxs)("div",{className:"comment-user-box",children:[Object(d.jsx)("img",{className:"comment-user-img",alt:"...",src:c||"https://images.assetsdelivery.com/thumbnails/thesomeday123/thesomeday1231709/thesomeday123170900021.jpg"}),Object(d.jsx)("p",{className:"comment-user-name",children:a}),Object(d.jsx)("p",{className:"comment-date",children:I()(s).format("l")})]}),Object(d.jsx)("p",{className:"comment-content",children:n})]},t)}))})}function T(e){var t=e.id,a=Object(s.useContext)(L).userState,n=Object(s.useState)(""),c=Object(o.a)(n,2),r=c[0],i=c[1],l=function(e){return m.a.post("https://manuelfossa-nodejs.herokuapp.com/comments/add-comment",{id_post:t,comment:r},{headers:{authorization:"Bearer "+e}})},p=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=sessionStorage.getItem("Tokens"),s=JSON.parse(a),""===r){e.next=17;break}return e.next=7,l(s.tokenA);case 7:if("jwt expired"!==e.sent.data.message){e.next=15;break}return e.next=11,c=s.tokenR,m.a.post("https://manuelfossa-nodejs.herokuapp.com/jwt/token",{token:c});case 11:return n=e.sent,e.next=14,l(n.data.tokenA);case 14:e.sent;case 15:e.next=17;break;case 17:window.location.reload(),i("");case 19:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("form",{onSubmit:p,children:[Object(d.jsx)("textarea",{className:"comment-txt",placeholder:a?"Comenta!":"Iniciar Sesion para Comentar",value:r,onChange:function(e){return i(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"comment-btn",disabled:!a,children:"Comentar"})]})}var E=a(54);function D(){var e=Object(b.g)().id,t=Object(s.useState)({}),a=Object(o.a)(t,2),n=a[0],c=a[1],r=n.post_title,i=n.post_subtitle,u=n.post_desc,l=n.post_image,j=n.post_date,p=n.user_nickname,O=n.categorie,h=n.id_categorie;return Object(s.useEffect)((function(){window.scrollTo(0,0),function(e){return m.a.get("https://manuelfossa-nodejs.herokuapp.com/posts/post/".concat(e))}(e).then((function(e){c(e.data.result)}))}),[]),Object(d.jsxs)("div",{className:"container-post",children:[Object(d.jsx)(f.b,{to:"/categorie-post/".concat(h),children:Object(d.jsx)("p",{className:"categorie-post",children:O})}),Object(d.jsx)("h1",{className:"title-post",children:r}),Object(d.jsxs)("div",{className:"data-post-container",children:[Object(d.jsx)("p",{className:"data-post",children:p}),Object(d.jsx)("p",{className:"data-post",children:I()(j).format("l")})]}),Object(d.jsx)("h3",{className:"subtitle-post",children:i}),Object(d.jsx)("img",{src:l,alt:"...",className:"img-post"}),Object(d.jsx)("div",{className:"content-post",children:Object(E.a)("".concat(u))}),Object(d.jsx)("hr",{}),Object(d.jsx)("h2",{className:"comments-title",children:"Comentarios"}),Object(d.jsxs)("div",{className:"comment-list",children:[Object(d.jsx)(T,{id:e}),Object(d.jsx)(F,{id:e})]})]})}function J(){var e=Object(b.g)().id,t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(s.useEffect)((function(){m.a.get("https://manuelfossa-nodejs.herokuapp.com/categories/categorie-post/".concat(e)).then((function(e){var t=e.data.data;c(t)}))}),[e]),Object(d.jsx)("div",{className:"container-card",children:Object(d.jsx)("div",{className:"row-card",children:n.map((function(e){return Object(d.jsx)(C,{post:e},e.id_post)}))})})}a(115);var L=Object(s.createContext)(null);var R=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(d.jsx)(L.Provider,{value:{userState:a,setUserState:n},children:Object(d.jsxs)(f.a,{children:[Object(d.jsx)(g,{}),Object(d.jsxs)(b.c,{children:[Object(d.jsx)(b.a,{path:"react-project/post/:id",children:Object(d.jsx)(D,{})}),Object(d.jsx)(b.a,{exact:!0,path:"react-project/",children:Object(d.jsx)(w,{})}),Object(d.jsx)(b.a,{path:"react-project/sign-in",children:Object(d.jsx)(x,{})}),Object(d.jsx)(b.a,{path:"react-project/login",children:Object(d.jsx)(O,{})}),Object(d.jsx)(b.a,{path:"react-project/new-post",children:Object(d.jsx)(S,{})}),Object(d.jsx)(b.a,{path:"react-project/categorie-post/:id",children:Object(d.jsx)(J,{})})]})]})})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,117)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(R,{})}),document.getElementById("root")),P()},15:function(e,t,a){},59:function(e,t,a){}},[[116,1,2]]]);
//# sourceMappingURL=main.23a3933a.chunk.js.map